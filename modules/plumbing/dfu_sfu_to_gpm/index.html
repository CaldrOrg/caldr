<body>
  <div style="display: flex; align-items: center; gap: 22px; margin-bottom: 10px;">
    <img src="../../../assets/caldr-logo.png" alt="Caldr Logo" class="caldr-logo no-print" style="height: 84px; object-fit: contain;" />
    <div>
      <h1 style="margin: 0; font-size: 2rem; font-weight: 700; letter-spacing: -1px;">
        <span class="highlighted-title" style="color: #2a80c9;">DFU/WSFU to GPM Conversion Calculator</span>
      </h1>
      <div style="font-size: 1.05rem; font-weight: 400; color: #444;">Convert Drainage, Supply, and Hot Water Fixture Units to Flow Rate</div>
    </div>
  </div>

  <hr style="border: none; border-top: 2px solid #ccc; margin: 10px 0 18px 0;">

  <div style="margin-bottom: 18px;">
    <button class="return-button no-print" onclick="location.href='../../../menu.html'" style="padding: 10px 18px; font-size: 1rem;">‚Üê Return to Menu</button>
  </div>

  <div class="caldr-project-info-row" style="display: flex; flex-wrap: wrap; gap: 24px; margin-bottom: 18px;">
    <div class="input-group" style="flex: 1 1 230px; min-width: 220px; max-width: 340px;">
      <label for="projectName" style="font-weight: 600; font-size: 1.05rem; margin-bottom: 4px;">Project Name</label>
      <input type="text" id="projectName" placeholder="Enter project name" style="width: 100%; padding: 8px; font-size: 1rem;" />
    </div>
    <div class="input-group" style="flex: 1 1 180px; min-width: 150px; max-width: 220px;">
      <label for="projectNumber" style="font-weight: 600; font-size: 1.05rem; margin-bottom: 4px;">Project Number</label>
      <input type="text" id="projectNumber" placeholder="0000" value="0000" style="width: 100%; padding: 8px; font-size: 1rem;" />
    </div>
    <div class="input-group" style="flex: 1 1 180px; min-width: 150px; max-width: 220px;">
      <label for="date" style="font-weight: 600; font-size: 1.05rem; margin-bottom: 4px;">Date</label>
      <input type="text" id="date" placeholder="MM/DD/YYYY" style="width: 100%; padding: 8px; font-size: 1rem;" />
    </div>
    <div class="input-group" style="flex: 1 1 230px; min-width: 220px; max-width: 340px;">
      <label for="designerName" style="font-weight: 600; font-size: 1.05rem; margin-bottom: 4px;">Designer/Engineer</label>
      <input type="text" id="designerName" placeholder="Enter name" style="width: 100%; padding: 8px; font-size: 1rem;" />
    </div>
  </div>

  <div style="margin-bottom: 24px;">
    <button class="no-print" onclick="window.print()" style="padding: 10px 18px; font-size: 1rem;">üñ®Ô∏è Print</button>
  </div>

  <div style="display: flex; flex-wrap: wrap; justify-content: space-between; align-items: flex-start; margin-top: 24px;">
    <div style="flex: 1 1 50%; margin-left: 12px;">
      <div class="caldr-input-block">
        <section class="conversion-inputs">
          <div style="display: flex; flex-direction: column; gap: 18px; margin-bottom: 24px;">
            <div class="input-group" style="max-width: 420px;">
              <label for="dfuInput" style="font-weight: 600; font-size: 1.05rem; margin-bottom: 4px; display: block;">DFU (Drainage Fixture Units)</label>
              <input type="number" id="dfuInput" placeholder="0" style="width: 100%; padding: 8px; font-size: 1rem;" />
            </div>
            <div class="input-group" style="max-width: 420px;">
              <label for="sfuInput" style="font-weight: 600; font-size: 1.05rem; margin-bottom: 4px; display: block;">WSFU (Water Supply Fixture Units)</label>
              <input type="number" id="sfuInput" placeholder="0" style="width: 100%; padding: 8px; font-size: 1rem;" />
            </div>
            <div class="input-group" style="max-width: 420px;">
              <label for="hwfuInput" style="font-weight: 600; font-size: 1.05rem; margin-bottom: 4px; display: block;">HWFU (Hot Water Fixture Units)</label>
              <input type="number" id="hwfuInput" placeholder="0" style="width: 100%; padding: 8px; font-size: 1rem;" />
            </div>
          </div>
        </section>
      </div>
    </div>
    <div class="summary-box" style="background: #f8f8f8; padding: 20px; border-radius: 10px; margin-left: 24px; box-shadow: 0 0 6px rgba(0,0,0,0.1); max-width: 420px; flex: 0 0 auto;">
      <h2 style="margin-top: 0; font-size: 1.25rem;">Fixture Demand Summary</h2>
      <table style="width: 100%; font-size: 1.05rem; border-collapse: collapse;">
        <thead>
          <tr style="text-align: left;">
            <th style="padding-bottom: 6px;">Fixture Unit</th>
            <th style="padding-bottom: 6px;">Total FU</th>
            <th style="padding-bottom: 6px;">GPM</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>DFU</td>
            <td id="dfuValue">0</td>
            <td id="gpmDFUOutput">0</td>
          </tr>
          <tr>
            <td>WSFU</td>
            <td id="sfuValue">0</td>
            <td id="gpmSFUOutput">0</td>
          </tr>
          <tr>
            <td>HWFU</td>
            <td id="hwfuValue">0</td>
            <td id="gpmHWFUOutput">0</td>
          </tr>
        </tbody>
      </table>
      <div style="margin-top: 12px;">
        <button onclick="toggleFormula()" style="padding: 8px 16px; font-size: 1rem;">üìê Show Formula</button>
        <div id="formulaBox" style="display: none; margin-top: 12px; background: #fff; border: 1px solid #ccc; padding: 12px; border-radius: 6px;">
          <strong>Conversion Formulas:</strong>
          <ul style="margin-top: 8px; padding-left: 18px;">
            <li><code>DFU to GPM</code>: GPM = DFU √ó 0.5</li>
            <li><code>WSFU to GPM</code>: GPM = WSFU √ó 0.6</li>
            <li><code>HWFU to GPM</code>: GPM = HWFU √ó 0.7</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <footer class="caldr-footer">
    <p class="caldr-disclaimer no-print">
      This tool is intended for reference use only. All calculations and outputs generated by Caldr must be independently reviewed and verified by a licensed engineer or the engineer of record (EOR). Caldr assumes no responsibility for the accuracy, completeness, or applicability of its outputs in final designs or construction documents.
    </p>
  </footer>

</script>
  <script>
    function updateSummary() {
      const dfu = parseFloat(document.getElementById('dfuInput').value) || 0;
      const sfu = parseFloat(document.getElementById('sfuInput').value) || 0;
      const hwfu = parseFloat(document.getElementById('hwfuInput').value) || 0;

      document.getElementById('dfuValue').textContent = dfu.toFixed(2);
      document.getElementById('sfuValue').textContent = sfu.toFixed(2);
      document.getElementById('hwfuValue').textContent = hwfu.toFixed(2);

      const gpmFromDFU = dfu * 0.5;
      const gpmFromSFU = sfu * 0.6;
      const gpmFromHWFU = hwfu * 0.7;
      const totalGPM = gpmFromDFU + gpmFromSFU + gpmFromHWFU;

      document.getElementById('gpmDFUOutput').textContent = gpmFromDFU.toFixed(2);
      document.getElementById('gpmSFUOutput').textContent = gpmFromSFU.toFixed(2);
      document.getElementById('gpmHWFUOutput').textContent = gpmFromHWFU.toFixed(2);
      // document.getElementById('gpmTotalOutput').textContent = totalGPM.toFixed(2) + ' GPM';
    }

    function toggleFormula() {
      const box = document.getElementById('formulaBox');
      box.style.display = box.style.display === 'none' ? 'block' : 'none';
    }

    document.getElementById('dfuInput').addEventListener('input', updateSummary);
    document.getElementById('sfuInput').addEventListener('input', updateSummary);
    document.getElementById('hwfuInput').addEventListener('input', updateSummary);

    // Initialize on load
    updateSummary();
  </script>
  <script src="../../modules/plumbing/dfu_sfu_to_gpm/dfu_sfu_to_gpm.js"></script>
</body>